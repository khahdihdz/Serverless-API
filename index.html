<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hack BÆ°á»›c ChÃ¢n Google Fit</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="styles.css" rel="stylesheet">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <div class="container text-center mt-5">
        <h1>ğŸš€ Hack BÆ°á»›c ChÃ¢n Google Fit</h1>
        <p id="status" class="text-warning">Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ báº¯t Ä‘áº§u</p>
        <div id="g-signin2"></div>
        <button id="signout-btn" class="btn btn-danger mt-2" disabled>ÄÄƒng xuáº¥t</button>
        <button id="hack-btn" class="btn btn-success mt-2" disabled>ThÃªm 10.000 BÆ°á»›c</button>
    </div>

    <script>
        const CLIENT_ID = "422012132533-pgroo786kqrbdq8aj1b791erm4aic29l.apps.googleusercontent.com";  // Thay tháº¿ báº±ng Client ID cá»§a báº¡n
        const SCOPES = "https://www.googleapis.com/auth/fitness.activity.write";
        let accessToken = null;

        function handleClientLoad() {
            google.accounts.id.initialize({
                client_id: CLIENT_ID,
                callback: handleCredentialResponse,
                scope: SCOPES
            });
            google.accounts.id.prompt(); // Hiá»ƒn thá»‹ há»™p thoáº¡i chá»n tÃ i khoáº£n
        }

        function handleCredentialResponse(response) {
            accessToken = response.credential;
            document.getElementById("status").innerText = "âœ… ÄÃ£ Ä‘Äƒng nháº­p!";
            document.getElementById("status").classList.replace("text-warning", "text-success");
            document.getElementById("hack-btn").disabled = false;
            document.getElementById("signout-btn").disabled = false;
            console.log("Access Token:", accessToken);
        }

        function handleSignOut() {
            google.accounts.id.disableAutoSelect(); // Táº¯t tá»± Ä‘á»™ng chá»n tÃ i khoáº£n
            accessToken = null;
            document.getElementById("status").innerText = "âŒ ÄÃ£ Ä‘Äƒng xuáº¥t!";
            document.getElementById("status").classList.replace("text-success", "text-warning");
            document.getElementById("hack-btn").disabled = true;
        }

        function sendFakeSteps() {
            if (!accessToken) {
                alert("âš ï¸ Vui lÃ²ng Ä‘Äƒng nháº­p trÆ°á»›c!");
                return;
            }

            const startTimeMillis = new Date().getTime() - 60000; // 1 phÃºt trÆ°á»›c
            const endTimeMillis = new Date().getTime(); // Hiá»‡n táº¡i
            const dataSourceId = "derived:com.google.step_count.delta:com.google.android.gms:estimated_steps";

            const requestBody = {
                "dataSourceId": dataSourceId,
                "maxEndTimeNs": endTimeMillis * 1000000,
                "minStartTimeNs": startTimeMillis * 1000000,
                "point": [{
                    "dataTypeName": "com.google.step_count.delta",
                    "startTimeNanos": startTimeMillis * 1000000,
                    "endTimeNanos": endTimeMillis * 1000000,
                    "value": [{ "intVal": 10000 }]
                }]
            };

            fetch(`https://www.googleapis.com/fitness/v1/users/me/dataSources/${dataSourceId}/datasets/${startTimeMillis}-${endTimeMillis}`, {
                method: "PATCH",
                headers: {
                    "Authorization": `Bearer ${accessToken}`,
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(requestBody)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById("status").innerText = "ğŸ‰ ÄÃ£ thÃªm 10,000 bÆ°á»›c chÃ¢n!";
                document.getElementById("status").classList.replace("text-success", "text-primary");
                console.log("ThÃªm bÆ°á»›c chÃ¢n thÃ nh cÃ´ng:", data);
            })
            .catch(error => {
                document.getElementById("status").innerText = "âŒ Lá»—i khi gá»­i dá»¯ liá»‡u!";
                document.getElementById("status").classList.replace("text-primary", "text-danger");
                console.error("Lá»—i khi gá»­i dá»¯ liá»‡u:", error);
            });
        }

        document.getElementById("signout-btn").addEventListener("click", handleSignOut);
        document.getElementById("hack-btn").addEventListener("click", sendFakeSteps);
        window.onload = handleClientLoad;
    </script>
</body>
</html>